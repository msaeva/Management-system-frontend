<form [formGroup]="createUserFormGroup">
  <div class="flex flex-column pt-3 w-full">
    <div class="p-float-label mt-5 w-full">
      <input pInputText id="username"
             class="input-field w-full"
             formControlName="username"/>
      <label for="username">Username</label>
      <div
        *ngIf="createUserFormGroup.get('username')?.invalid && (createUserFormGroup.get('username')?.dirty || createUserFormGroup.get('username')?.touched)"
        class="p-error">
        <small *ngIf="createUserFormGroup.get('username')?.errors?.['required']" class="p-error">
          Username is required.
        </small>
        <small *ngIf="createUserFormGroup.get('username')?.errors?.['minlength']" class="p-error">
          Username must be at least 3 characters long.
        </small>
      </div>
    </div>

    <div class="p-float-label mt-5 w-full">
      <input pInputText id="email"
             type="email"
             class="input-field w-full"
             formControlName="email"/>
      <label for="email">Email</label>
      <div
        *ngIf="createUserFormGroup.get('email')?.invalid && (createUserFormGroup.get('email')?.dirty || createUserFormGroup.get('email')?.touched)"
        class="p-error">
        <small *ngIf="createUserFormGroup.get('email')?.errors?.['required']" class="p-error">
          First name is required.
        </small>
        <small *ngIf="createUserFormGroup.get('email')?.errors?.['email']" class="p-error">
          Email is invalid!
        </small>
      </div>
    </div>

    <div class="p-float-label mt-5 w-full">
      <input pInputText id="first-name"
             class="input-field w-full"
             formControlName="firstName"/>
      <label for="first-name">First Name</label>
      <div
        *ngIf="createUserFormGroup.get('firstName')?.invalid && (createUserFormGroup.get('firstName')?.dirty || createUserFormGroup.get('firstName')?.touched)"
        class="p-error">
        <small *ngIf="createUserFormGroup.get('firstName')?.errors?.['required']" class="p-error">
          First name is required.
        </small>
        <small *ngIf="createUserFormGroup.get('firstName')?.errors?.['minlength']" class="p-error">
          First name must be at least 3 characters long.
        </small>
      </div>
    </div>

    <div class="p-float-label mt-5 w-full">
      <input pInputText id="last-name"
             class="input-field w-full"
             formControlName="lastName"/>
      <label for="last-name">Last Name</label>
      <div
        *ngIf="createUserFormGroup.get('lastName')?.invalid && (createUserFormGroup.get('lastName')?.dirty || createUserFormGroup.get('lastName')?.touched)"
        class="p-error">
        <small *ngIf="createUserFormGroup.get('lastName')?.errors?.['required']" class="p-error">
          Last name is required.
        </small>
        <small *ngIf="createUserFormGroup.get('lastName')?.errors?.['minlength']" class="p-error">
          Last name must be at least 3 characters long.
        </small>
      </div>
    </div>

    <div class="p-float-label mt-5 w-full">
      <input pPassword id="password"
             type="password"
             class="input-field w-full" formControlName="password"/>
      <label for="password">Password</label>
      <div
        *ngIf="createUserFormGroup.get('password')?.invalid && (createUserFormGroup.get('password')?.dirty || createUserFormGroup.get('password')?.touched)"
        class="p-error">
        <small *ngIf="createUserFormGroup.get('password')?.errors?.['required']" class="p-error">
          Password is required.
        </small>
        <small *ngIf="createUserFormGroup.get('password')?.errors?.['minlength']" class="p-error">
          Password must be at least 6 characters long.
        </small>
      </div>
    </div>

    <div class="p-float-label mt-5 w-full">
      <p-dropdown [options]="roleOptions"
                  formControlName="role"
                  optionValue="value"
                  optionLabel="value"
                  appendTo="body"
                  [showClear]="true"
                  placeholder="Select a Role">
      </p-dropdown>
      <div
        *ngIf="createUserFormGroup.get('role')?.invalid && (createUserFormGroup.get('role')?.dirty || createUserFormGroup.get('role')?.touched)"
        class="p-error">
        <small *ngIf="createUserFormGroup.get('role')?.errors?.['required']" class="p-error">
          Role is required.
        </small>
      </div>
    </div>

    <div class="mt-3" *ngIf="createUserFormGroup.hasError('taken')">
      <small class="p-error">Username or email is already taken.</small>
    </div>

    <div class="flex flex-wrap justify-content-center align-items-center gap-2 mt-5">
      <p-button (onClick)="createAccount()"
                [disabled]="createUserFormGroup.invalid"
                label="Create" icon="pi pi-user"
                styleClass="w-10rem mx-auto">
      </p-button>
    </div>
  </div>
</form>
